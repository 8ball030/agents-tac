@startuml
"tac_controller" -> "OEF Node": register_service(model=tac)
"tac_agent_0" -> "OEF Node": search_services(model=tac)
"OEF Node" -> "tac_agent_0": search result: ["tac_controller"]
"tac_agent_0" -> "tac_controller": Register
"tac_agent_1" -> "OEF Node": search_services(model=tac)
"OEF Node" -> "tac_agent_1": search result: ["tac_controller"]
"tac_agent_1" -> "tac_controller": Register
note over "tac_controller"
tac_agent_1 game state: 
GameState{"current_holdings": [0, 1, 2, 1, 1],
 "initial_endowment": [0, 1, 2, 1, 1],
 "money": 20,
 "preferences": [1, 2, 0, 4, 3],
 "scores": [4, 3, 2, 1, 0]}
Score: 28
end note
"tac_controller" -> "tac_agent_1": GameData(money, endowments, preferences, scores, fee)
note over "tac_controller"
tac_agent_0 game state: 
GameState{"current_holdings": [2, 1, 0, 1, 1],
 "initial_endowment": [2, 1, 0, 1, 1],
 "money": 20,
 "preferences": [4, 2, 1, 3, 0],
 "scores": [4, 3, 2, 1, 0]}
Score: 27
end note
"tac_controller" -> "tac_agent_0": GameData(money, endowments, preferences, scores, fee)
"tac_agent_0" -> "OEF Node": register_service(model=tac_seller)
"tac_agent_1" -> "OEF Node": register_service(model=tac_seller)
"tac_agent_0" -> "OEF Node": search_services(model=tac_seller, {2})
"OEF Node" -> "tac_agent_0": search result: ["tac_agent_1"]
"tac_agent_0" -> "tac_agent_1": CFP(dialogue_id=763, {2})
"tac_agent_1" -> "OEF Node": search_services(model=tac_seller, {0})
"OEF Node" -> "tac_agent_1": search result: ["tac_agent_0"]
"tac_agent_1" -> "tac_agent_0": CFP(dialogue_id=20226, {0})
"tac_agent_1" -> "tac_agent_0": Propose(dialogue_id=763, {"good_02": 1, "price": 2})
"tac_agent_0" -> "tac_agent_1": Propose(dialogue_id=20226, {"good_00": 1, "price": 4})
"tac_agent_1" -> "tac_controller": Transaction({"amount": 4,\n\
 "buyer": True,\n\
 "counterparty": "tac_agent_0",\n\
 "good_ids": (0, 1, 2, 3, 4),\n\
 "quantities": (1, 0, 0, 0, 0),\n\
 "transaction_id": "tac_agent_1_tac_agent_0_20226"})
"tac_agent_0" -> "tac_controller": Transaction({"amount": 2,\n\
 "buyer": True,\n\
 "counterparty": "tac_agent_1",\n\
 "good_ids": (0, 1, 2, 3, 4),\n\
 "quantities": (0, 0, 1, 0, 0),\n\
 "transaction_id": "tac_agent_0_tac_agent_1_763"})
"tac_agent_1" -> "tac_agent_0": Accept(20226)
"tac_agent_0" -> "tac_agent_1": Accept(763)
note over "tac_controller"
Transaction tac_agent_1_tac_agent_0_20226 settled.
end note
note over "tac_controller"
New holdings:
00 [1, 1, 2, 1, 1]
01 [1, 1, 0, 1, 1]

end note
note over "tac_controller"
Details:
score=26, money=16
score=31, money=24
end note
"tac_controller" -> "tac_agent_1": ConfirmTransaction(tac_agent_1_tac_agent_0_20226)
"tac_controller" -> "tac_agent_0": ConfirmTransaction(tac_agent_1_tac_agent_0_20226)
note over "tac_controller"
Transaction tac_agent_0_tac_agent_1_763 settled.
end note
note over "tac_controller"
New holdings:
00 [1, 1, 1, 1, 1]
01 [1, 1, 1, 1, 1]

end note
note over "tac_controller"
Details:
score=28, money=18
score=32, money=22
end note
"tac_controller" -> "tac_agent_0": ConfirmTransaction(tac_agent_0_tac_agent_1_763)
"tac_controller" -> "tac_agent_1": ConfirmTransaction(tac_agent_0_tac_agent_1_763)
@enduml
