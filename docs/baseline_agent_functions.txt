on_start
	> _register_as_seller
		> _get_goods_supplied_description
			> _get_supplied_goods_quantities
		> _register_service
	> _register_as_buyer
		> _get_goods_demanded_description
			> _get_demanded_goods_quantities
		> _register_service	
	> _search_for_sellers
		> _build_sellers_query
			> _get_demanded_goods_ids
		> _search_services
	> _search_for_buyers
		> _build_buyers_query
			> _get_supplied_goods_ids
		> _search_services

on_search_results
	> _on_sellers_search_result
		> _build_sellers_query
		> send_cfp (as buyer)
	> _on_buyers_search_result
		> _build_buyers_query
		> send_cfp (as seller)

on_cfp
	> _on_cfp_as_seller
		> _save_dialogue_id_as_seller
		> _get_goods_supplied_description
		> send_decline (as seller)
		> send_propose (as seller)
	> _on_cfp_as_buyer
		> _get_goods_demanded_description
		> send_decline (as buyer)
		> send_propose (as buyer)

on_propose
	> _on_propose_as_buyer
		> _accept_propose_as_buyer
			> start_lock_as_buyer
			> send_accept (as buyer)
		> send_decline (as buyer)
	> _on_propose_as_seller
		> _accept_propose_as_seller
			> start_lock_as_seller
			> send_accept (as seller)
		> send_decline (as seller)

on_decline

on_accept
	> _on_accept_as_seller
		> start_lock_as_seller
		> submit_transaction (as seller)
		> match_accept (as seller)
	> _on_accept_as_buyer
		> start_lock_as_buyer
		> submit_transaction (as buyer)
		> match_accept (as buyer)

on_match_accept
	> _on_match_accept_as_buyer
		> submit_transaction (as buyer)
	> _on_match_accept_as_seller
		> submit_transaction (as seller)

on_transaction_confirmed
	> _on_confirmed_as_seller
		> end_lock_as_seller
	> _on_confirmed_as_buyer
		> end_lock_as_buyer

on_tac_error