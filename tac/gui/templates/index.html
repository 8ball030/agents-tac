{% extends 'base.html' %}

{% block header %}
  <h2  align="center">{% block title %}Display data{% endblock %}</h2>
{% endblock %}

{% block content %}

<div class="row">
  <div class="col-xs-12">
    <p>Please select a JSON file describing a game simulation.</p>

    <form method="POST" enctype="multipart/form-data" action="/upload">
      <input type="file" name="file[]" multiple="">
      <input type="submit" value="submit">
    </form>
  </div>
</div>
<div>
  Simulation parameters:
    <ul>
      <li>nb_agents: {{nb_agents}}</li>
      <li>nb_goods: {{nb_goods}}</li>
      <li>initial_money_amounts: {{initial_money_amounts}}</li>
      <li>fee: {{fee}}</li>
      <li>#transactions: {{nb_transactions}}</li>
    </ul>
</div>
<div align="center">
  <img src="{{saved_plot_figure}}">
  <br>
  <table border="1" cellpadding="10">
    <thead>
      <tr>
        <th>agent id</th>
        <th>initial score</th>
        <th>endowments</th>
        <th>preferences</th>
        <th>final holdings</th>
        <th>final balance</th>
        <th>final score</th>
      </tr>
    </thead>
    <tbody>
      {% for idx, game_state in idx_game_states %}
        <tr>
          <th>{{ game.configuration.agent_labels[idx] }}</th>
          <th>{{ game_state.score_good_quantities(game.configuration.endowments[idx]) + game.configuration.initial_money_amounts[idx]}}</th>
          <th>{{ game.configuration.endowments[idx] }}</th>
          <th>{{ game.configuration.utilities[idx] }}</th>
          <th>{{ game_state.current_holdings }}</th>
          <th>{{ game_state.balance }}</th>
          <th>{{ game_state.get_score() }}</th>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
